# Weather SDK

---

**Weather SDK** ‚Äî –ª—ë–≥–∫–∏–π Java-–∫–ª–∏–µ–Ω—Ç –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å [OpenWeather API](https://openweathermap.org/api).  
–û–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —É–¥–æ–±–Ω—ã–π —Å–ø–æ—Å–æ–± –ø–æ–ª—É—á–∞—Ç—å –ø–æ–≥–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω—ã–π –∫—ç—à –∏ —Ä–∞–±–æ—Ç–∞—Ç—å –≤ –ø–æ—Ç–æ–∫–æ–≤–æ–º —Ä–µ–∂–∏–º–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (`POLLING`).

---

## –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è

> –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã SDK –≤ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π –∫–æ–Ω—Å–æ–ª–∏ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ–º –æ–± –æ—á–∏—Å—Ç–∫–µ –∫—ç—à–∞:

![Weather SDK Demo](img.png)

---

##  –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –ü–æ–ª—É—á–µ–Ω–∏–µ –∞–∫—Ç—É–∞–ª—å–Ω–æ–π –ø–æ–≥–æ–¥—ã –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –≥–æ—Ä–æ–¥–∞  
- –î–≤–∞ —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã:
  - `ON_DEMAND` ‚Äî –∑–∞–ø—Ä–æ—Å –ø–æ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—é —Å –ª–æ–∫–∞–ª—å–Ω—ã–º –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º  
  - `POLLING` ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ —Ñ–æ–Ω–µ  
- LRU-–∫—ç—à (–¥–æ **10 –≥–æ—Ä–æ–¥–æ–≤**, —Å—Ä–æ–∫ –∂–∏–∑–Ω–∏ ‚Äî **10 –º–∏–Ω—É—Ç**)  
- –ú–≥–Ω–æ–≤–µ–Ω–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –ø–æ—Å–ª–µ–¥–Ω–∏–º –¥–∞–Ω–Ω—ã–º (Zero-Latency)  
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —è–∑—ã–∫–æ–≤, –µ–¥–∏–Ω–∏—Ü –∏–∑–º–µ—Ä–µ–Ω–∏—è –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ API  
- –í–æ–∑–≤—Ä–∞—Ç –¥–∞–Ω–Ω—ã—Ö –≤ JSON-—Ñ–æ—Ä–º–∞—Ç–µ, —Å–æ–≤–º–µ—Å—Ç–∏–º–æ–º —Å OpenWeather

---

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ü–æ–ª—É—á–∏—Ç–µ API-–∫–ª—é—á
–°–æ–∑–¥–∞–π—Ç–µ –∫–ª—é—á –Ω–∞ [OpenWeather](https://home.openweathermap.org/api_keys).

### 2. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é –æ–∫—Ä—É–∂–µ–Ω–∏—è

#### Windows PowerShell
```powershell
setx OPENWEATHER_API_KEY "–≤–∞—à_api_–∫–ª—é—á"
```

#### Linux / macOS
```bash
export OPENWEATHER_API_KEY="–≤–∞—à_api_–∫–ª—é—á"
```

### 3. –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫

#### –°–±–æ—Ä–∫–∞
```bash
mvn clean package
```

#### –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Maven
```bash
mvn exec:java -Dexec.mainClass=com.dmitry.weathersdk.Main -Dexec.args="London"
```

#### –ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ Java
```bash
java -cp target/classes com.dmitry.weathersdk.Main London
```

---

## üí° –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

```java
try (WeatherSdk sdk = WeatherSdk.create(
        System.getenv("OPENWEATHER_API_KEY"),
        Options.defaults().withMode(Mode.ON_DEMAND)
)) {
    String json = sdk.getCurrentWeatherJson("Paris");
    System.out.println(json);
}
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:**
```json
{
  "weather": { "main": "Clouds", "description": "broken clouds" },
  "temperature": { "temp": 15.2, "feels_like": 14.8 },
  "visibility": 10000,
  "wind": { "speed": 3.6 },
  "datetime": 1730930410,
  "sys": { "sunrise": 1730887612, "sunset": 1730919356 },
  "timezone": 3600,
  "name": "Paris"
}
```

---

## –ü–æ–≤–µ–¥–µ–Ω–∏–µ –∫—ç—à–∞

–ö—ç—à –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—á–∏—â–∞–µ—Ç—Å—è:
- –ø—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ –ª–∏–º–∏—Ç–∞ (10 –≥–æ—Ä–æ–¥–æ–≤);
- –∏–ª–∏ –µ—Å–ª–∏ –¥–∞–Ω–Ω—ã–µ —Å—Ç–∞—Ä—à–µ 10 –º–∏–Ω—É—Ç.

–í –∫–æ–Ω—Å–æ–ª—å –≤—ã–≤–æ–¥—è—Ç—Å—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:
```
[2025-11-07T18:52:44Z]  Cache expired for key: moscow
[2025-11-07T18:53:00Z]  Cache full ‚Äî removed oldest entry: amsterdam
```

---

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------|-----------|
| `WeatherSdk` | –§–∞—Å–∞–¥ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–æ–≥–æ–¥–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ |
| `WeatherClient` | HTTP-–∫–ª–∏–µ–Ω—Ç –¥–ª—è –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ OpenWeather API |
| `LruCache`, `CacheEntry` | –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –∫—ç—à —Å TTL –∏ LRU-–æ—á–∏—Å—Ç–∫–æ–π |
| `PollingScheduler` | –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —Ñ–æ–Ω–æ–≤–æ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è |
| `Options` | –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (TTL, –ª–∏–º–∏—Ç—ã, —Ä–µ–∂–∏–º, —è–∑—ã–∫, –µ–¥–∏–Ω–∏—Ü—ã) |

---

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

| –ü–∞—Ä–∞–º–µ—Ç—Ä | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|-----------|-----------|---------------|
| `cacheMaxEntries` | –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–æ—Ä–æ–¥–æ–≤ –≤ –∫—ç—à–µ | `10` |
| `cacheTtl` | –í—Ä–µ–º—è –∂–∏–∑–Ω–∏ –∑–∞–ø–∏—Å–∏ | `10 –º–∏–Ω—É—Ç` |
| `pollingInterval` | –ò–Ω—Ç–µ—Ä–≤–∞–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –≤ —Ä–µ–∂–∏–º–µ `POLLING` | `5 –º–∏–Ω—É—Ç` |
| `mode` | –†–µ–∂–∏–º —Ä–∞–±–æ—Ç—ã SDK (`ON_DEMAND` / `POLLING`) | `ON_DEMAND` |

---

## –ü—Ä–∏–º–µ—Ä –¥–ª—è —Ä–µ–∂–∏–º–∞ POLLING

```java
WeatherSdk sdk = WeatherSdk.create(
    System.getenv("OPENWEATHER_API_KEY"),
    Options.defaults()
        .withMode(Mode.POLLING)
        .withPollingInterval(Duration.ofMinutes(3))
);
```

SDK –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è—Ç—å –¥–∞–Ω–Ω—ã–µ –∫–∞–∂–¥—ã–µ 3 –º–∏–Ω—É—Ç—ã.

---

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å SDK –∫–∞–∫ –±–∏–±–ª–∏–æ—Ç–µ–∫—É –≤ –¥—Ä—É–≥–æ–º –ø—Ä–æ–µ–∫—Ç–µ ‚Äî –¥–æ–±–∞–≤—å—Ç–µ –µ–≥–æ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ —á–µ—Ä–µ–∑ Maven:

```xml
<dependency>
    <groupId>com.dmitry</groupId>
    <artifactId>weathersdk</artifactId>
    <version>1.0.0</version>
</dependency>
```

---

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|-----------|------------|
| **Java 21** | –Ø–∑—ã–∫ –∏ —Å—Ä–µ–¥–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è |
| **Maven** | –°–∏—Å—Ç–µ–º–∞ —Å–±–æ—Ä–∫–∏ |
| **OpenWeather API** | –ò—Å—Ç–æ—á–Ω–∏–∫ –ø–æ–≥–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö |
| **LRU Cache** | –õ–æ–∫–∞–ª—å–Ω–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ |
| **Polling Scheduler** | –§–æ–Ω–æ–≤–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö |
| **JSON (org.json / Jackson)** | –ü–∞—Ä—Å–∏–Ω–≥ –∏ —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö |

---

## –°—Ç–∞—Ç—É—Å —Å–±–æ—Ä–∫–∏

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å |
|------------|------|
| –ö–æ–º–ø–∏–ª—è—Ü–∏—è | –£—Å–ø–µ—à–Ω–æ |
| –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ API | –†–∞–±–æ—Ç–∞–µ—Ç |
| –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ | –í–∫–ª—é—á–µ–Ω–æ |
| –†–µ–∂–∏–º POLLING | –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω |
| –ü–æ–¥–¥–µ—Ä–∂–∫–∞ Unicode-–≥–æ—Ä–æ–¥–æ–≤ | –î–∞ |


